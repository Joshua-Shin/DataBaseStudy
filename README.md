DataBase 학습을 기록하기 위한 저장소 입니다.
---------------
- 개괄
  - DDL(스키마 조작하는거), DML(인스턴스 조작하는거) DCL(접근권한 조작), TCL(트랜젝션 권한 조작)
  - 스키마, 인스턴스. 테이블에서 맨 윗 열을 스키마로 보고, 그 아래 모든 열들을 인스턴스로 보면 돼.
  - DB 설계 = DB 모델링 : 스키마를 만드는것
  - DB 설계의 4단계 : 요구사항분석 -> 개념적 설계 -> 논리적 설계 -> 물리적 설계
  - 요구사항분석 : 어떤 엔티티를 끌어내야 하는지 업무기술서 같은거 보면서 분석하는거.
  - 개념적 설계 : ERM(=개체 관계 모델), ERD(=개체 관계 다이어그램) 만들기. R은 Relationship.
  - 논리적 설계 : Relational Model 만들기, 테이블을 만든다 생각하면 돼.

- 개념적 설계
  - 엔티티, 관계, 속성
  - 엔티티는 물리적객체 개념적객체를 다 포함한 하나의 정보 단위. 우리나라말로 개체.
  - 속성은 엔티티도 관계도 다 갖고 있을 수 있어.
  - 속성에는 singleValued, multiValued, simple, composite, stored, derived 가 있어
  - Composite 속성의 예는 주소.
  - 차수. degree. 는 unary, binary, tenary.. n-ary 가 있음 하나의 관계에 여러 엔티티가 달려있는거.
  - 대응수. 는 일대일 일대다 다대다. 관계에 매달린 속성은 일대다에서 다 쪽으로 붙일 수 있음
  - 키 속성이 없는 개체를 약한 개체라고 함. Identifying Entity의 키 속성과 약한 개체의 키인 부분 키와 합쳐서 키 속성을 만들 수 있어.
  - 보통은 약한개체는 안만드는게 좋아
  - 상속과 비슷한 개념인데 일반화 라는게 있어.

- 논리적 설계
  - 4가지 제약
    - 도메인 제약, 키 제약, 개체 무결성 제약, 참조 무결성 제약
    - 도메인 제약: 나이 속성에다가 문자열을 쓴다거나 200을 넘기는 수가 들어간다거나 하면 안된다.
    - 키 제약 : 키가 있어야 한다.
    - 개체 무결성 제약 : 키에 해당되는 인스턴스 값은 not null & unique 해야 한다.
    - 참조 무결성 제약 : 참조하는 값이 null 이거나, null이 아니라면 해당 값이 실제로 존재해야 한다.
  - ERD to RM의 7가지 스탭
    - 강한 개체 테이블 만들고
    - 약한 개체 테이블 만들고
    - 1:N 관계인거 1인 릴레이션의 PK를 N인 릴레이션으로 넘겨서 FK 필드 만들어주고
    - 1:1 관계인거 아무쪽에다가 FK 필드 만들어주고
    - N:M 관계인거 새로 테이블 만들어주고 각각의 PK를 가져와서 새 테이블의 Composite Key로 만듦
    - N-Ary 관계인거 새로 테이블 만들어주고 역시 N차 M차인애들의 PK를 새 테이블의 Composite Key로 만들고, 1차인애늬 PK는 그냥 속성으로 포함.
    - multivalued 속성 따로 테이블 만들어주고
  - ERD 아무리 잘 만들었어도 실수 있을 수 있어, ERD를 RM 으로 바꾸는거에는 실수 있으면 안되고, 자동화툴도 있을정도니.
  - 테이블 잘 만들었나 보고 잘못 만들었으면 수정하고, 하는 과정을 정규화라고 하고
  - 정규화의 과정중 핵심은 함수적 종속성을 확인하는거.
  - 현재 테이블에 있는 Key 이외의 다른 속성이 또 다른 속성들을 결정짓고 있다면 테이블을 분리하는것을 고려해야돼.
  - 제3정규화 정도가 이론적으로도 실무적으로도 적합함.
  
- 세팅
  - Oracle, SQL Developer 사용.
  - 맥에서는 Oracle 설치 못함. -> Docker 사용해서 Oracle 설치
  - 맥 m1에서는 Docker로 oracle 컨테이너 생성 및 설치 못함
  - 오픈 소스 컨테이너 런타임인 Colima를 사용해 oci-oracle-xe 이미지를 x86/64 환경으로 띄워서 설치
  - 그러니까 Docker Desktop으로 컨테이너에 설치한게 아니라 Colima로 설치한거임. 다만 Docker Engine은 사용하고 있는 상태인듯.
  - 실제로 Docker Desktop 실행해보면 컨테이너와 이미지 리스트에 oracle 안보임.
  - SQL Developer는 쉽게 설치 가능.
  - Oracle이 사용 가능 상태 되면, SQL developer 실행해서 oracle과 연동.
  - SQL developer를 종료할때 commit할래 물어보는데, commit하면, 컨테이너에 데이터가 저장되는듯.
  - 당연히 새로운 컨테이너 만들어서 다시 시작하면 해당 데이터는 없겠지.
  - 터미널 종료 해도 컨테이너는 자동 종료 안됨. 컴 종료해야 자동 종료 되는듯?
  - 터미널에서 docker ps -a 치면 컨테이너 리스트과 실행상태 볼 수 있음
  - docker stop 컨테이너ID, docker start 컨테이너ID
  - 당연히 컨테이너에서 실행중인 상태여야 sql developer에서 접속 가능해.
  - [참조](https://shanepark.tistory.com/400)
